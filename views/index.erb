<!doctype html>
<html>
  <head>
    <%= erb :header %>
  </head>
  <body>
    <script type='text/x-handlebars' data-template-name='application'>
      <div id="wrap">
        <div class="navbar navbar-default" role="navigation">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="http://starbounditems.herokuapp.com">Starbound Items</a>
            </div>
            <div class="navbar-collapse collapse">
              <ul class="nav navbar-nav navbar-right">
                <li>{{#link-to 'items.search'}}Search{{/link-to}}</li>
                <li>{{#link-to 'items.all'}}All Items{{/link-to}}</li>
                <li>{{#link-to 'stats'}}Stats{{/link-to}}</li>
                <li><a href="https://github.com/MarceloAlves/StarboundItems"><i class="fa fa-github fa-2x"></i></a></li>
              </ul>
            </div>
        </div>

        <div class="container">
          {{outlet}}
        </div>
      </div>
      {{partial "footer"}}
    </script>

    <script type='text/x-handlebars' data-template-name='items/search'>
      <div class="well well-sm">
        <div class="col-md-12">
          {{input type="text" class="form-control input-lg" value=searchText placeholder="Start Typing... (Examples: dirtmaterial, tomatojuice, sandstonetorch)"}}
        </div>
        <div class="clearfix"></div>
      </div>
      {{outlet}}
    </script>

    <script type='text/x-handlebars' data-template-name='items/search/results'>
      <p>{{resultCount}} results:</p>
      {{item-table items=arrangedContent}}
    </script>

    <script type='text/x-handlebars' data-template-name='items/all'>
      {{item-table items=arrangedContent}}
      <div class="well"><h3>TODO: Implement pagination</h3></div>
    </script>

    <script type='text/x-handlebars' data-template-name='components/item-table'>
      <table class="table table-striped table-bordered">
        <thead>
          <th>Icon</th>
          <th>Item</th>
          <th>Name</th>
          <th>Description</th>
          <th>Rarity</th>
          <th>Type</th>
        </thead>
        <tbody>
          {{#each item in items itemController='item'}}
            <tr>
              <td>{{#if item.inventoryIcon}}<img {{bind-attr src='item.iconUrl'}} height="20">{{/if}}</td>
              <td>{{item.itemName}}</td>
              <td>{{item.shortdescription}}</td>
              <td>{{item.description}}</td>
              <td {{bind-attr class='item.rarityClass'}}> <span class="item-rarity">{{item.rarity}}</span></td>
              <td><span class="item-type">{{item.type}}</span></td>
            </tr>
          {{else}}
            <tr>
              <td colspan='6'>There are no items.</td>
            </tr>
          {{/each}}
        </tbody>
      </table>
    </script>

    <script type='text/x-handlebars' data-template-name='stats'>
      <div class="row">
        <div class="col-md-6 col-md-push-3">
          <img src="images/logo-transparent.png" class="img-responsive" alt="starbound logo">
        </div>
      </div>
      <div class="row">
        <div class="col-md-4">
          <h3>Top 10 Searches</h3>
          <ul class="list-unstyled">
              {{#each search in searchTerms}}
              <li>
                <span {{bind-attr class=':label search.isTop:label-success:label-default'}}>{{search.score}}</span>
                &nbsp;
                {{search.term}}
              </li>
              {{/each}}
          </ul>
        </div>
        <div class="col-md-4 text-center">
          <h3>Total Searches</h3>
          <h1>{{total_searches}}</h1>
        </div>
        <div class="col-md-4 text-center">
          <h3>Stable Items</h3>
          <h1>{{item_count}}</h1>
        </div>
      </div>
    </script>

    <script type='text/x-handlebars' data-template-name='_footer'>
      <div id="footer">
        <div class="container">
            <p class="text-muted pull-left">Game content and materials are trademarks and copyrights of their respective publisher and its licensors. All rights reserved.</p>
            <p class="text-muted pull-right">Database Last Updated: Feb 1 2015 - <a href="https://github.com/MarceloAlves/StarboundItems/issues">Feedback</a></p>
        </div>
      </div>
    </script>

  </body>
  </html>
